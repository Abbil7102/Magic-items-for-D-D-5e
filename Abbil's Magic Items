 /*	-WHAT IS THIS?-
	This file adds optional material to "MPMB's Character Record Sheet" found at https://flapkan.com/mpmb/charsheets
	Import this file using the "Add Extra Materials" bookmark.
	-KEEP IN MIND-
	It is recommended to enter the code in a fresh sheet before adding any other information (i.e. before making your character with it).
*/

/*  -INFORMATION-
	Subject:	Weapons and Equipment Packs
	Effect:		This script adds a number of weapons and equipment packs
				This is taken from Dungeon Masters Guild (https://www.dmsguild.com/product/174973) and is the version from 2nd of August 2017
				This content is made by Jason Mendell
	Code by:	MorePurpleMoreBetter
	Date:		2018-04-11 (sheet v13.00.00)
				The code will work in v12.999 but will require closing and opening the sheet before the packs are available
	Please support the creator of this content (Jason Mendell) and download his material from DM Guild: https://www.dmsguild.com/browse.php?author=Jason%20Mendell
	IMPORTANT: adding this script will remove a couple of alternative names for weapons (e.g. longsword will no longer trigger for anything other than just 'longsword')
	Note that this content is not balanced well for all weapons and the official D&D 5e rules state that you are better off using the weapon stats from the PHB and switching out their names for something else (e.g. the sickle stats fit a kama)
*/

var iFileName = "Abbil's Magic Items [Abbil's work, transcribed by Abbil].js";
RequiredSheetVersion(12.999);

SourceList["AMI"] = {
	name : "AMI",
	abbreviation : "AMI",
	group : "Dungeon Masters Guild",
	url : "https://www.dmsguild.com/product/174973",
	date : "2017/08/02"
};

MagicItemsList["brooch of valor"] = {
		name : "Brooch of Valor",
		source : ["AMI",0],
		type : "wondrous item",
		rarity : "very rare",
		magicItemTable : "H",
		description : "This brooch appears as a golden shield with a heart shaped ruby in it's center.\nOnce per day, This brooch will allow you to make two extra melee attacks with advantage within any 1 action sequence. Once it has been used, it will regain its charge at dawn the following day.",
		descriptionFull : "This brooch appears as a golden shield with a heart shaped ruby in it's center.\nOnce per day, This brooch will allow you to make two extra melee attacks with advantage within any 1 action sequence. Once it has been used, it will regain its charge at dawn the following day.",
		weight : 1,
		usages: 1,
		recovery: "dawn",
	};
MagicItemsList["gauntlet of tuir stonebeard"] = {
		name : "Gauntlet of Tuir Stonebeard",
		source : ["AMI",0],
		type : "wondrous item",
		rarity : "rare",
		magicItemTable : "G",
		description : "This gauntlet was crafted by the inventor of Orcslayer Steel, Tuir Stonebeard. When wearing this gauntlet, your melee attacks against orc and goblin enemies cause an extra d4 points of damage when they hit.",
		descriptionFull : "This gauntlet was crafted by the inventor of Orcslayer Steel, Tuir Stonebeard. When wearing this gauntlet, your melee attacks against orc and goblin enemies cause an extra d4 points of damage when they hit.",
		weight : 2,
		attunement : false,
		calcChanges : {
			atkAdd : [
				function (fields, v) {
					if (v.isMeleeWeapon) fields.Description += '; +D4 vs orcs & goblins';
				}
	]}};
MagicItemsList["ironwood armor"] = {
		name : "Ironwood Armor",
		source : ["AMI",0],
		type : "armor (medium, heavy)",
		rarity : "uncommon",
		description : "This wooden armor has been permanently enchanted to be as strong as steel by the ironwood spell.",
		descriptionFull : "This wooden armor has been permanently enchanted to be as strong as steel by the ironwood spell. Other than the fact that the armor is wood, it has the same properties and attributes as metal armor of it's type.",
		allowDuplicates : true,
		chooseGear : {
			type : "armor",
			prefixOrSuffix : "brackets",
			itemName1stPage : ["suffix", "Ironwood"],
			descriptionChange : ["prefix", "armor"],
			excludeCheck : function (inObjKey, inObj) {
				return !(/medium|heavy/i).test(inObj.type) || (/hide/i).test(inObj.name);
			}
		}
	};
MagicItemsList["adamantium shield"] = {
	regExpSearch : /^(?=.*shield)(?=.*adamantium).*$/i,
	name : "Adamantium Shield",
	source : ["AMI",0],
	type : "weapon",
	rarity : "uncommon",
	attunement : true,
	description : "This shield is made of Adamantium and does not adhere to the laws of physics.  This metal nullifies vibrations and when held uses your reaction to turn a critical hit in to a normal damage attack.",
	descriptionFull : "This shield is made of Adamantium and does not adhere to the laws of physics.  This metal nullifies vibrations and when held uses your reaction to turn a critical hit in to a normal damage attack.",
	usages : 4,
	recovery : "long rest",
	weaponsAdd : ["Adamantium Shield"],
	action : [["reaction", "Thwart Critical Hit"]],
	weaponOptions : {
		baseWeapon : "round shield",
		regExpSearch : /^(?=.*shield)(?=.*adamantium).*$/i,
		name : "Adamantium Shield",
		source : ["AMI",0],
		range : "Melee, 20/60 ft",
		description : "Thrown; When held use your reaction to turn a Critical Hit into a Normal Hit",
}};		


